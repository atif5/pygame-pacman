

logic = {
    0: "dead",
    1: "legal",
    2: "dot",
    3: "energizer",
    4: "intersection",
    6: "intersectioon-food",
    7: "intersection-energizer",
    8: "monster-pen",
    9: "pen-exit"
}
DOT = {2, 6}
ENERGIZER = {3, 7}
FOOD = DOT.union(ENERGIZER)
INTERSECTION = {4, 6, 7}

MAZE_MAP = [  # initial

    0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,
    0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,
    0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,
    0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,
    0, 6, 2, 2, 2, 2, 6, 2, 2, 2, 2, 2, 6, 0, 0, 6, 2, 2, 2, 2, 2, 6, 2, 2, 2, 2, 6, 0,
    0, 2, 0, 0, 0, 0, 2, 0, 0, 0, 0, 0, 2, 0, 0, 2, 0, 0, 0, 0, 0, 2, 0, 0, 0, 0, 2, 0,
    0, 3, 0, 0, 0, 0, 2, 0, 0, 0, 0, 0, 2, 0, 0, 2, 0, 0, 0, 0, 0, 2, 0, 0, 0, 0, 3, 0,
    0, 2, 0, 0, 0, 0, 2, 0, 0, 0, 0, 0, 2, 0, 0, 2, 0, 0, 0, 0, 0, 2, 0, 0, 0, 0, 2, 0,
    0, 6, 2, 2, 2, 2, 6, 2, 2, 6, 2, 2, 6, 2, 2, 6, 2, 2, 6, 2, 2, 6, 2, 2, 2, 2, 6, 0,
    0, 2, 0, 0, 0, 0, 2, 0, 0, 2, 0, 0, 0, 0, 0, 0, 0, 0, 2, 0, 0, 2, 0, 0, 0, 0, 2, 0,
    0, 2, 0, 0, 0, 0, 2, 0, 0, 2, 0, 0, 0, 0, 0, 0, 0, 0, 2, 0, 0, 2, 0, 0, 0, 0, 2, 0,
    0, 6, 2, 2, 2, 2, 6, 0, 0, 6, 2, 2, 6, 0, 0, 6, 2, 2, 6, 0, 0, 6, 2, 2, 2, 2, 6, 0,
    0, 0, 0, 0, 0, 0, 2, 0, 0, 0, 0, 0, 1, 0, 0, 1, 0, 0, 0, 0, 0, 2, 0, 0, 0, 0, 0, 0,
    0, 0, 0, 0, 0, 0, 2, 0, 0, 0, 0, 0, 1, 0, 0, 1, 0, 0, 0, 0, 0, 2, 0, 0, 0, 0, 0, 0,
    0, 0, 0, 0, 0, 0, 2, 0, 0, 4, 1, 1, 4, 1, 1, 4, 1, 1, 4, 0, 0, 2, 0, 0, 0, 0, 0, 0,
    0, 0, 0, 0, 0, 0, 2, 0, 0, 1, 0, 0, 0, 9, 0, 0, 0, 0, 1, 0, 0, 2, 0, 0, 0, 0, 0, 0,
    0, 0, 0, 0, 0, 0, 2, 0, 0, 1, 0, 8, 8, 8, 8, 8, 8, 0, 1, 0, 0, 2, 0, 0, 0, 0, 0, 0,
    1, 1, 1, 1, 1, 1, 6, 1, 1, 4, 0, 8, 8, 8, 8, 8, 8, 0, 4, 1, 1, 6, 1, 1, 1, 1, 1, 1,
    0, 0, 0, 0, 0, 0, 2, 0, 0, 1, 0, 8, 8, 8, 8, 8, 8, 0, 1, 0, 0, 2, 0, 0, 0, 0, 0, 0,
    0, 0, 0, 0, 0, 0, 2, 0, 0, 1, 0, 0, 0, 0, 0, 0, 0, 0, 1, 0, 0, 2, 0, 0, 0, 0, 0, 0,
    0, 0, 0, 0, 0, 0, 2, 0, 0, 4, 1, 1, 1, 1, 1, 1, 1, 1, 4, 0, 0, 2, 0, 0, 0, 0, 0, 0,
    0, 0, 0, 0, 0, 0, 2, 0, 0, 1, 0, 0, 0, 0, 0, 0, 0, 0, 1, 0, 0, 2, 0, 0, 0, 0, 0, 0,
    0, 0, 0, 0, 0, 0, 2, 0, 0, 1, 0, 0, 0, 0, 0, 0, 0, 0, 1, 0, 0, 2, 0, 0, 0, 0, 0, 0,
    0, 6, 2, 2, 2, 2, 6, 2, 2, 6, 2, 2, 6, 0, 0, 6, 2, 2, 6, 2, 2, 6, 2, 2, 2, 2, 6, 0,
    0, 2, 0, 0, 0, 0, 2, 0, 0, 0, 0, 0, 2, 0, 0, 2, 0, 0, 0, 0, 0, 2, 0, 0, 0, 0, 2, 0,
    0, 2, 0, 0, 0, 0, 2, 0, 0, 0, 0, 0, 2, 0, 0, 2, 0, 0, 0, 0, 0, 2, 0, 0, 0, 0, 2, 0,
    0, 7, 2, 6, 0, 0, 6, 2, 2, 6, 2, 2, 6, 2, 2, 6, 2, 2, 6, 2, 2, 6, 0, 0, 6, 2, 7, 0,
    0, 0, 0, 2, 0, 0, 2, 0, 0, 2, 0, 0, 0, 0, 0, 0, 0, 0, 2, 0, 0, 2, 0, 0, 2, 0, 0, 0,
    0, 0, 0, 2, 0, 0, 2, 0, 0, 2, 0, 0, 0, 0, 0, 0, 0, 0, 2, 0, 0, 2, 0, 0, 2, 0, 0, 0,
    0, 6, 2, 6, 2, 2, 6, 0, 0, 6, 2, 2, 6, 0, 0, 6, 2, 2, 6, 0, 0, 6, 2, 2, 6, 2, 6, 0,
    0, 2, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 2, 0, 0, 2, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 2, 0,
    0, 2, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 2, 0, 0, 2, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 2, 0,
    0, 6, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 6, 2, 2, 6, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 6, 0,
    0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,
    0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,
    0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,
]

TUNNEL = {476, 503}
TUNNELS = list(range(476, 482))+list(range(498, 504))
UP_FORBIDDEN = {740, 743, 404, 407}



def maze_relative(ri, vec):
    return ri+vec[1]*28+vec[0]
